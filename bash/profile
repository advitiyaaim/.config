#!/bin/bash
#      .-.     .-.     .-.     .-.     .-.     .-.     .-.     .-.     .-.
# `._.'   `._.'   `._.'   `._.'   `._.'   `._.'   `._.'   `._.'   `._.'   `._.'
#
# github.com/rafi ~/.profile

# OSX stuff
if [[ "$OSTYPE" == "darwin"* ]]; then
	export PATH="bin:/Applications/packer:/Applications/git-annex.app/Contents/MacOS:$PATH"

	# pkgin
	#export PATH="/usr/pkg/sbin:/usr/pkg/bin:$PATH"

	# MacPorts
	export PATH=/opt/local/bin:/opt/local/sbin:$PATH
fi

source "$HOME/.config/bash/exports"

# Import environment on local login
[ -n "$XDG_VTNR" ] && systemctl --user import-environment

# Use keychain to load keys
# https://github.com/funtoo/keychain
eval `keychain --dir "$XDG_CACHE_HOME/keychain" --eval --agents ssh -Q --quiet id_rsa rafi_sortex_rsa`

#if [ -n "$IS_SSH" ]; then
#	hash tmux 2>/dev/null && tmux has 2>/dev/null && exec tmux attach
#fi

# Default systemd to the console target
target="console"

# Bring up systemd --user to the specified target
systemctl --user start ${target}.target
unset target

source "$HOME/.bashrc"

# Extra OSX stuff
if [[ "$OSTYPE" == "darwin"* ]]; then
	source "$HOME/.config/bash/osx"
fi
